
Сделано в Oracle SQL developer тут у меня не работает заполнение таблиц через запятую (подчеркивает), и не работает AUTO INCREMENT тоже подчеркивает.


-----Создаем 5 таблиц.


CREATE TABLE PLASE_OF_WORK (
ID NUMBER PRIMARY KEY,
ORG_NAME VARCHAR(25) NOT NULL UNIQUE
);

CREATE TABLE POST (
ID NUMBER PRIMARY KEY,
POST_NAME VARCHAR(20) NOT NULL UNIQUE
);

CREATE TABLE RECEIVING_THE_MONEY(
ID NUMBER PRIMARY KEY,
AMOUNT_OF_MONEY INT NOT NULL
);

CREATE TABLE BALANCE (
ID NUMBER PRIMARY KEY,
DEBET INT DEFAULT '0',
CREDIT INT NOT NULL
);

CREATE TABLE PERSON_INFO (
ID NUMBER PRIMARY KEY,
NAME VARCHAR(30) NOT NULL,
SEX VARCHAR(10) DEFAULT 'FEMALE',
PLASEWORK_ID INT NOT NULL,
FOREIGN KEY (PLASEWORK_ID) REFERENCES PLASE_OF_WORK (ID),
BALANCE_ID INT NOT NULL,
FOREIGN KEY (BALANCE_ID) REFERENCES BALANCE (ID)
);




-----Используем ALTER TABLE


ALTER TABLE RECEIVING_THE_MONEY ADD REC_DATE DATE NOT NULL;

ALTER TABLE PERSON_INFO ADD POST_ID INT NOT NULL;
ALTER TABLE PERSON_INFO ADD
FOREIGN KEY (POST_ID)
REFERENCES POST (ID);

ALTER TABLE BALANCE ADD RECIV_MONEY INT NOT NULL;
ALTER TABLE BALANCE ADD( FOREIGN KEY (RECIV_MONEY) REFERENCES RECEIVING_THE_MONEY (ID));



-----Заносим значения в таблицы


INSERT INTO PLASE_OF_WORK VALUES ('1', 'ZLIN');
INSERT INTO PLASE_OF_WORK VALUES ('2', 'SELMASH');
INSERT INTO PLASE_OF_WORK VALUES ('3', 'STANKOGOMEL');

INSERT INTO POST VALUES ('1', 'TURNER');
INSERT INTO POST VALUES ('2', 'LOCKSMITH');
INSERT INTO POST VALUES ('3', 'ETW');

INSERT INTO RECEIVING_THE_MONEY VALUES ('1', '700', '25-04-2019');
INSERT INTO BALANCE VALUES ('1', '150', '0', '1');
INSERT INTO PERSON_INFO VALUES ('1', 'MIHANOV_VASYLIY', 'MALE', '1', '1','2');

INSERT INTO RECEIVING_THE_MONEY VALUES ('2', '550', '20-04-2019');
INSERT INTO BALANCE VALUES ('2', '30', '0', '2');
INSERT INTO PERSON_INFO VALUES ('2', 'NIKIFOROV_KOSTYA', 'MALE', '3', '2', '1');

INSERT INTO RECEIVING_THE_MONEY VALUES ('3', '1150', '23-04-2019');
INSERT INTO BALANCE VALUES ('3', '400', '6720', '3');
INSERT INTO PERSON_INFO VALUES ('3', 'PIKYL_SVETLANA', 'FEMALE', '2', '3', '3');

INSERT INTO RECEIVING_THE_MONEY VALUES ('4', '620', '18-02-2019');
INSERT INTO BALANCE VALUES ('4', '900', '0', '4');
INSERT INTO PERSON_INFO VALUES ('4', 'SIDOROV_NIKOLAY', 'MALE', '1', '4', '1');

INSERT INTO RECEIVING_THE_MONEY VALUES ('5', '1400', '11-04-2019');
INSERT INTO BALANCE VALUES ('5', '800', '2200', '5');
INSERT INTO PERSON_INFO VALUES ('5', 'LASTOCHKINA_NASTYA', 'FEMALE', '3', '5', '3');



-----Скрипты для удаления и изменения записей.


UPDATE BALANCE SET CREDIT = CREDIT - 100 WHERE CREDIT >0;

UPDATE BALANCE SET DEBET = DEBET + 250 WHERE  DEBET <=100 AND DEBET > 10;

UPDATE RECEIVING_THE_MONEY SET AMOUNT_OF_MONEY = AMOUNT_OF_MONEY * 1.1 
WHERE REC_DATE BETWEEN '01-01-2019' AND '01-03-2019';

DELETE FROM PERSON_INFO WHERE PLASEWORK_ID =2 AND NAME LIKE '%PIK%';



-----Выборки


SELECT *
FROM PERSON_INFO;

SELECT *
FROM BALANCE;

SELECT *
FROM RECEIVING_THE_MONEY;

SELECT *
FROM POST;

SELECT *
FROM PLASE_OF_WORK;

SELECT S.NAME AS ÔÈÎ, G.DEBET AS ÍÀ_Ñ×ÅÒÓ, G.CREDIT AS ÂÅÑÈÒ_ÊÐÅÄÈÒ
FROM PERSON_INFO S, BALANCE G
WHERE S.BALANCE_ID = G.ID;

SELECT S.NAME AS ÔÈÎ, G.ORG_NAME AS ÎÐÃÀÍÈÇÀÖÈß, P.POST_NAME AS ÇÀÍÈÌÀÅÌÀß_ÄÎËÆÍÀÑÒÜ
FROM PERSON_INFO S, PLASE_OF_WORK G, POST P
WHERE S.POST_ID = P.ID AND S.PLASEWORK_ID = G.ID;

SELECT F.ORG_NAME AS ÎÐÃÀÍÈÇÀÖÈß, COUNT(*) AS ÊÎËÈ×ÅÑÒÂÎ_ÐÀÁÎ×ÈÕ
FROM PLASE_OF_WORK F,PERSON_INFO G
WHERE G.PLASEWORK_ID = F.ID
GROUP BY F.ORG_NAME
HAVING COUNT(*)>1;

SELECT S.NAME AS ÔÈÎ, G.DEBET AS ÍÀ_Ñ×ÅÒÓ, F.AMOUNT_OF_MONEY AS ÏÎÑÒÓÏËÅÍÈß_Â_ÎÁÐÀÁÎÒÊÅ, P.ORG_NAME AS ÎÐÃÀÍÈÇÀÖÈß
FROM PERSON_INFO S, BALANCE G, RECEIVING_THE_MONEY F, PLASE_OF_WORK P
WHERE S.PLASEWORK_ID = (SELECT ID FROM PLASE_OF_WORK WHERE ORG_NAME LIKE '%MEL')
AND S.BALANCE_ID = G.ID
AND G.RECIV_MONEY = F.ID
AND P.ID = (SELECT ID FROM PLASE_OF_WORK WHERE ORG_NAME LIKE '%MEL');



-----Удаляем таблицы


ALTER TABLE PERSON_INFO DROP CONSTRAINT POST_ID;
ALTER TABLE PERSON_INFO DROP CONSTRAINT PLASEWORK_ID;
ALTER TABLE PERSON_INFO DROP CONSTRAINT BALANCE_ID;
ALTER TABLE BALANCE DROP CONSTRAINT RECIV_MONEY;

DROP TABLE PERSON_INFO;
DROP TABLE BALANCE;
DROP TABLE RECEIVING_THE_MONEY;
DROP TABLE PLASE_OF_WORK;
DROP TABLE POST;
